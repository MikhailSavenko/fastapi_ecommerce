# FastAPI Project with PostgreSQL, SQLAlchemy, and JWT Authentication

## Описание

Этот проект предназначен для практики работы с FastAPI и использует PostgreSQL в качестве базы данных, SQLAlchemy для работы с моделями и ORM, а также Pydantic для валидации данных и создания схем. Проект включает в себя создание, изменение, удаление и получение данных для моделей, таких как `Product`, `Review`, `Category` и `User`, а также доступ к ресурсам через JWT токен с управлением правами доступа.

## Стек технологий

- **FastAPI** (0.115.11) — веб-фреймворк для создания API.
- **SQLAlchemy** (2.0.39) — ORM для работы с базой данных.
- **Alembic** (1.15.1) — инструмент для миграций базы данных.
- **asyncpg** (0.30.0) — драйвер PostgreSQL для асинхронного подключения.
- **Pydantic** — библиотека для валидации данных и создания схем.
- **Passlib** (1.7.4) — библиотека для работы с хешированием паролей.
- **bcrypt** (4.0.1) — библиотека для хеширования паролей с использованием bcrypt.
- **pyJWT** (2.10.1) — библиотека для создания и верификации JWT токенов.
- **python-multipart** (0.0.20) — поддержка multipart/form-data.
- **Uvicorn** (standard) — ASGI сервер для запуска приложения FastAPI.

## Установка и запуск

1. Клонируйте репозиторий:

```bash
git clone <ссылка на репозиторий>
cd <папка проекта>
```

2. Создайте виртуальную среду:

```bash
python -m venv venv
```

3. Активируйте виртуальную среду:

   - **Windows**:

   ```bash
   venv\Scripts\activate
   ```

   - **Linux/MacOS**:

   ```bash
   source venv/bin/activate
   ```

4. Создайте файл `.env` на основе `env.example.txt`:

```bash
cp env.example.txt .env
```

В файле `.env` настройте параметры для подключения к базе данных (например, порты и учетные данные).

5. Установите зависимости:

```bash
pip install -r requirements.txt
```

6. Запустите базу данных с помощью Docker Compose:

```bash
docker-compose up -d
```

Это запустит контейнер с PostgreSQL, доступный по порту 5555.

7. Примените миграции для базы данных:

```bash
alembic upgrade head
```

8. Запустите приложение:

```bash
uvicorn app.main:app --reload
```

Приложение будет доступно по адресу: `http://localhost:8000`.

## Документация API

Документация вашего API доступна по следующему адресу:

[http://localhost:8000/docs](http://localhost:8000/docs)

В документации вы найдете все маршруты и примеры запросов.

## Структура проекта

- **models** — файлы с декларативными моделями SQLAlchemy (`Product`, `Review`, `Category`, `User`).
- **schemas** — Pydantic схемы для валидации и сериализации данных.
- **routers** — файлы с роутерами для обработки запросов API (получение, создание, обновление, удаление).
- **auth** — файл с функциями для аутентификации и авторизации пользователей (JWT токены).
- **main.py** — главный файл для запуска приложения.

## Пример использования API

Перейдите на [http://localhost:8000/docs](http://localhost:8000/docs) для доступа к интерактивной документации API, где вы можете выполнять запросы напрямую через браузер.

## Аутентификация

Для доступа к защищённым маршрутам необходимо передавать JWT токен в заголовке `Authorization`. Пример:

```bash
Authorization: Bearer <ваш_JWT_токен>
```

## Примечания

- База данных запускается через Docker Compose, поэтому убедитесь, что Docker установлен и запущен.
- Для миграций используется Alembic. Для того чтобы применить миграции, используйте команду `alembic upgrade head`.